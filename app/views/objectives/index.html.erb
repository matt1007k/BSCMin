<% @title = "Objetivos Estratégicos" %>
<nav class="breadcrumb" aria-label="breadcrumbs">
  <ul>
    <li> <%= link_to  "Dashboard", root_path %></li>
    <li class="is-active">      
      <a href="#" aria-current="page">Objetivos Estratégicos</a>
    </li>
  </ul>
</nav>


<div class="columns">
  <div class="column">
      <div class="card margin-small shadow-cm">
        <div class="card-content">
          <p class="subtitle has-text-centered">Las perspectivas y objetivos del mapa estratégico.</p>
          <div class="is-between">
            <p class="title is-4">Perspectivas y Objetivos Estratégicos</p>
            <%= link_to new_perspective_path, class: "button is-success" do %>
                <span class="icon">
                  <i class="mdi mdi-library-plus"></i>
                </span>
                <span><%= t('.new_perspective_link') %> </span>
            <% end %>
          </div>

          <div class="shadow-cm padding-small-all">
            <% @perspectives.each do |perspective| %>
              <div class="columns">
                <div class="column is-8 has-background-primary ">
                  <div class="has-text-white title is-5 has-text-weight-bold">
                    Perspectiva "<%= perspective.title %>"
                  </div>
                </div>

                <div class="column is-2 has-text-right has-background-primary has-text-white">
                  <%= link_to edit_perspective_path(perspective), class: "button is-info tooltip", :data => {tooltip: t('.edit_perspective_link')} do %>
                      <span class="icon">
                        <i class="mdi mdi-update"></i>
                      </span>
                  <% end %>
                  <%= link_to perspective_url(perspective), method: :delete, class: "button is-danger tooltip", data: {tooltip: t('.remove_perspective_link'), confirm: "¿Está seguro de eliminar la perspectiva?"} do %>
                      <span class="icon">
                        <i class="mdi mdi-close"></i>
                      </span>
                  <% end %>
                </div>

                <div class="column has-background-grey has-text-white">
                  <%= link_to objective_new_path(perspective), class: "button" do %>
                    <span class="icon">
                      <i class="mdi mdi-library-plus"></i>
                    </span>
                    <span><%= t('.new_link') %> </span>
                  <% end %>
                </div>
              </div>


              <% perspective.objectives.each do |objective| %>
                <div class="columns">
                    <div class="column is-1 has-text-centered has-text-weight-bold">
                      <%= objective.slug %>
                    </div>
                    <div class="column is-9 ">
                      <%= objective.content %>
                    </div>

                    <div class="column">
                      <%= link_to objective_edit_path(objective,perspective), class: "button is-info tooltip", :data => {tooltip: t('.edit_link')} do %>
                        <span class="icon">
                          <i class="mdi mdi-update"></i>
                        </span>
                      <% end %>
                      <%= link_to objective_url(perspective), method: :delete,  class: "button is-danger tooltip", :data => {tooltip: t('.remove_link'), confirm: '¿Está seguro de eliminar la objective?'} do %>
                        <span class="icon">
                          <i class="mdi mdi-close"></i>
                        </span>
                      <% end %>
                      <%= link_to "/#",  class: "button is-success tooltip", data: {tooltip: t('.asign_strategy_link')} do %>
                        <span class="icon">
                          <i class="mdi mdi-check"></i>
                        </span>
                      <% end %>
                    </div>
                </div>
              <% end %>
            <% end %>

          </div>

          


        </div>
      </div>

  </div>
</div>


